<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Pixel Circle — N Pixels</title>
  <style>
    html, body {
      margin: 0;
      height: 100%;
      background-color: black;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }
    canvas {
      image-rendering: pixelated;
      display: block;
      border: 2px solid #333;
      max-width: 100vw;
      max-height: 100vh;
    }
  </style>
</head>
<body>
  <canvas id="px"></canvas>

  <script>
    const logicalSize = 500; // размер канваса
    const N = 1000;          // количество пикселей в круге
    const canvas = document.getElementById('px');
    const ctx = canvas.getContext('2d');
    canvas.width = logicalSize;
    canvas.height = logicalSize;

    // Цвета RGBA
    const gray     = [0x26, 0x2C, 0x36, 255]; // #262C36
    const cyan     = [0x00, 0xFF, 0xFF, 255]; // #00FFFF
    const magenta  = [0xFF, 0x00, 0xFF, 255]; // #FF00FF
    const mixColor = [0x80, 0x80, 0xFF, 255]; // #8080FF

    const probs = {
      gray: 0.5,
      magenta: 0.15,
      cyan: 0.3,
      mix: 0.05
    };

    function getRandomColor() {
      const p = Math.random();
      if (p < probs.gray) return gray;
      if (p < probs.gray + probs.magenta) return magenta;
      if (p < probs.gray + probs.magenta + probs.cyan) return cyan;
      return mixColor;
    }

    function generateCirclePixels() {
      // очистка фона
      ctx.fillStyle = 'black';
      ctx.fillRect(0, 0, logicalSize, logicalSize);

      const cx = logicalSize / 2;
      const cy = logicalSize / 2;
      const radius = logicalSize / 2;

      for (let i = 0; i < N; i++) {
        // Полярные координаты для равномерного распределения по площади круга
        const r = radius * Math.sqrt(Math.random());
        const theta = Math.random() * 2 * Math.PI;
        const x = Math.floor(cx + r * Math.cos(theta));
        const y = Math.floor(cy + r * Math.sin(theta));

        const [red, green, blue, alpha] = getRandomColor();
        const imgData = ctx.createImageData(1,1);
        const d = imgData.data;
        d[0] = red;
        d[1] = green;
        d[2] = blue;
        d[3] = alpha;
        ctx.putImageData(imgData, x, y);
      }
    }

    function resizeCanvas() {
      const size = Math.min(window.innerWidth, window.innerHeight);
      canvas.style.width = size + 'px';
      canvas.style.height = size + 'px';
    }

    canvas.addEventListener('click', generateCirclePixels);

    generateCirclePixels();
    resizeCanvas();
    window.addEventListener('resize', resizeCanvas);
  </script>
</body>
</html>
